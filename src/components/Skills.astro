---
import { getLangFromUrl, useTranslations } from '@/i18n/utils';
import { Image } from 'astro:assets';
import htmlLogo from 'public/images/skills/html5-original.svg';
import cssLogo from 'public/images/skills/css3-original.svg';
import tsLogo from 'public/images/skills/typescript-original.svg';
import nextJsLogo from 'public/images/skills/nextjs.png';
import jsLogo from 'public/images/skills/javascript.svg';
import reactLogo from 'public/images/skills/react.png';
import astroLogo from 'public/images/skills/astro.png';
import vueLogo from 'public/images/skills/vue.png';
import tailwindcssLogo from 'public/images/skills/tailwindcss.png';
import expressLogo from 'public/images/skills/express.png';
import nodejsLogo from 'public/images/skills/nodejs.png';
import nestjsLogo from 'public/images/skills/nestjs.png';
import sqlLogo from 'public/images/skills/sql.png';
import postgresqlLogo from 'public/images/skills/postgresql.png';
import mysqlLogo from 'public/images/skills/mysql.png';
import mongodbLogo from 'public/images/skills/mongodb.png';
import firebaseLogo from 'public/images/skills/firebase.png';
import dockerLogo from 'public/images/skills/docker.png';
const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);

// organiza arrays para mapear y duplicar (efecto infinito)
const frontend = [
  { src: htmlLogo, alt: 'HTML5' },
  { src: cssLogo, alt: 'CSS3' },
  { src: jsLogo, alt: 'JavaScript' },
  { src: tsLogo, alt: 'TypeScript' },
  { src: reactLogo, alt: 'React' },
  { src: astroLogo, alt: 'Astro' },
  { src: vueLogo, alt: 'Vue.js' },
  { src: nextJsLogo, alt: 'Next.js' },
  { src: tailwindcssLogo, alt: 'Tailwind.css' },
];

const backend = [
  { src: nodejsLogo, alt: 'Node.js' },
  { src: expressLogo, alt: 'Express.js' },
  { src: nestjsLogo, alt: 'NestJS' },
  { src: sqlLogo, alt: 'SQL' },
  { src: postgresqlLogo, alt: 'PostgreSQL' },
  { src: mysqlLogo, alt: 'MySQL' },
  { src: mongodbLogo, alt: 'MongoDB' },
  { src: firebaseLogo, alt: 'Firebase' },
  { src: dockerLogo, alt: 'Docker' },
];
---

<div id='skills' class='w-full py-12 px-6 md:py-16 md:px-12'>
  <div class='max-w-6xl mx-auto grid grid-cols-1 md:grid-cols-2 gap-12 items-start'>
    <div class=''>
      <h2 class='text-5xl md:text-7xl rillosta text-center md:text-left'>{t('skills.title')}</h2>
      <p class='mt-4 text-lg md:text-2xl pochita text-gray-700 dark:text-gray-300 max-w-xl mx-auto md:mx-0'>
        {t('skills.description')}
      </p>
    </div>

    <div class='w-full max-w-3xl mx-auto md:mx-0 rounded-2xl bg-indigo-900 overflow-hidden relative'>
      <!-- ventana superior (botones) -->
      <div class='rounded-t-2xl h-10 w-full bg-gray-600 flex items-center px-3 gap-2'>
        <span class='block w-3 h-3 rounded-full bg-red-400'></span>
        <span class='block w-3 h-3 rounded-full bg-yellow-400'></span>
        <span class='block w-3 h-3 rounded-full bg-green-400'></span>
        <div class='ml-auto text-sm text-gray-200 pochita pr-2'>.powerups</div>
      </div>

      <div class='p-6'>
        <div class='text-sm text-gray-200 mb-4'>
          <span class='text-green-400'>facundoDiaz@root</span>
          <span class='text-blue-300 ml-2'>~$</span>
          <span class='text-cyan-300 ml-2'>skills --list</span>
        </div>

        <!-- FRONTEND -->
        <section class='mb-8'>
          <h3 class='text-xl font-semibold text-white pochita mb-3 animate-frontend-gradient inline-block px-2 py-1 rounded-md'>Front-End</h3>

          <div class='overflow-hidden w-full'>
            <div class='flex gap-6 items-center animate-carousel min-w-max'>
              {frontend.map((item) => <Image inferSize loading='eager' class='w-12 h-12 object-contain' src={item.src} alt={item.alt} />)}
              {/* duplicado para loop infinito (aria-hidden para lectores) */}
              <div aria-hidden='true' class='flex gap-6 items-center'>
                {frontend.map((item) => <Image inferSize loading='eager' class='w-12 h-12 object-contain opacity-90' src={item.src} alt={item.alt} />)}
              </div>
            </div>
          </div>
        </section>

        <!-- BACKEND -->
        <section>
          <h3 class='text-xl font-semibold text-white pochita mb-3 animate-backend-gradient inline-block px-2 py-1 rounded-md'>Back-End</h3>

          <div class='overflow-hidden w-full'>
            <div class='flex gap-6 items-center animate-carousel min-w-max'>
              {backend.map((item) => <Image inferSize loading='eager' class='w-12 h-12 object-contain' src={item.src} alt={item.alt} />)}
              <div aria-hidden='true' class='flex gap-6 items-center'>
                {backend.map((item) => <Image inferSize loading='eager' class='w-12 h-12 object-contain opacity-90' src={item.src} alt={item.alt} />)}
              </div>
            </div>
          </div>
        </section>
      </div>
    </div>
  </div>
</div>
